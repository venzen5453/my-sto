<body>
    <div class="app-container">
        <div id="modal-overlay">
            <div class="modal">
                <div id="modal-type-title" style="font-weight: bold; margin-bottom: 15px; text-align: center; color: var(--primary-color);">내역 입력</div>
                <input type="number" id="modal-amount-input" class="modal-input" inputmode="numeric" placeholder="0">
                <div id="category-selector" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px;"></div>
                <input type="text" id="modal-note-input" class="styled-input" style="margin-bottom:20px;" placeholder="상세 메모">
                <div style="display:flex; gap:10px;">
                    <button onclick="closeModal()" style="flex:1; padding:15px; border:none; background:#666; border-radius:12px; color:white; font-weight:bold;">취소</button>
                    <button onclick="confirmTransaction()" style="flex:1; padding:15px; border:none; background:var(--primary-color); color:white; border-radius:12px; font-weight:bold;">저장하기</button>
                </div>
            </div>
        </div>

        <div style="flex: 1; overflow-y: auto; display: flex; flex-direction: column;">
            
            <div id="tab-home" class="tab-content active">
                <div class="header">
                    <div style="display:flex; align-items:center; justify-content:center; gap:15px; margin-bottom:10px;">
                        <button onclick="moveDate(-1)" style="background:none; border:none; color:white; font-size:1.2rem;">◀</button>
                        <input type="date" id="date-picker" onchange="updateUI();" style="background:rgba(255,255,255,0.15); border:none; color:white; padding:8px 12px; border-radius:8px; font-size:1rem; color-scheme:dark;">
                        <button onclick="moveDate(1)" style="background:none; border:none; color:white; font-size:1.2rem;">▶</button>
                    </div>
                    <div class="total-amount" id="total-balance">토탈 ¥0</div>
                    <div class="asset-split">
                        <div class="asset-item"><span class="asset-label" style="color:var(--cash-accent)">현금</span><div id="cash-balance" class="asset-value">¥0</div></div>
                        <div class="asset-item"><span class="asset-label" style="color:var(--card-accent)">카드</span><div id="card-balance" class="asset-value">¥0</div></div>
                    </div>
                </div>
                <div class="action-box">
                    <div class="button-grid">
                        <button class="btn-plus" onclick="openModal('plus', 'cash')">💰 현금 입금</button>
                        <button class="btn-plus" onclick="openModal('plus', 'card')">💳 카드 입금</button>
                        <button class="btn-minus" onclick="openModal('minus', 'cash')">💸 현금 출금</button>
                        <button class="btn-minus" onclick="openModal('minus', 'card')">🛍️ 카드 출금</button>
                    </div>
                </div>
                <div class="scroll-area" id="history-list"></div>
            </div>

            <div id="tab-chart" class="tab-content">
                <div class="header"><h2 style="margin:0;">📊 통계</h2></div>
                <div class="scroll-area"><div id="chart-list" class="chart-container"></div></div>
            </div>

            <div id="tab-search" class="tab-content">
                <div class="header"><h2 style="margin:0;">🔍 검색</h2></div>
                <div style="padding:15px;"><input type="text" id="search-input" class="styled-input" placeholder="분류/메모 검색..." onkeyup="searchHistory()"></div>
                <div class="scroll-area" id="search-results"></div>
            </div>

            <div id="tab-more" class="tab-content">
                <div class="header"><h2 style="margin:0;">⚙️ 설정</h2></div>
                <div class="scroll-area" style="padding:20px;">
                    <button onclick="exportMonthlyExcel()" style="width:100%; padding:15px; border-radius:12px; background:var(--header-bg); color:white; font-weight:bold; border:none; margin-bottom:20px;">📂 엑셀 저장</button>
                    <div id="fixed-item-box" style="margin-bottom:100px;">
                        <h4 style="margin-bottom:10px;">🔁 고정 지출 등록</h4>
                        <input type="text" id="fixed-name" class="styled-input" placeholder="항목명" style="margin-bottom:8px;">
                        <button onclick="addFixedItem()" style="width:100%; padding:12px; background:var(--primary-color); color:white; border:none; border-radius:10px; font-weight:bold;">등록</button>
                    </div>
                </div>
            </div>

        </div>

        <nav class="nav-bar" style="position: relative; bottom: 0; left: 0; right: 0; width: 100%; max-width: 430px; margin: 0; padding-bottom: env(safe-area-inset-bottom); background: var(--card-bg); border-top: 1px solid var(--border-color); border-radius: 0; height: auto; display: flex; justify-content: space-around; align-items: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.05);">
            <button class="nav-item active" onclick="switchTab('home', this)" style="padding: 12px 0;">
                <span>🏠</span><span>홈</span>
            </button>
            <button class="nav-item" onclick="switchTab('chart', this)" style="padding: 12px 0;">
                <span>📊</span><span>통계</span>
            </button>
            <button class="nav-item" onclick="switchTab('search', this)" style="padding: 12px 0;">
                <span>🔍</span><span>검색</span>
            </button>
            <button class="nav-item" onclick="switchTab('more', this)" style="padding: 12px 0;">
                <span>⚙️</span><span>설정</span>
            </button>
        </nav>
    </div>
</body>
